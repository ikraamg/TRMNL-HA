# Basic E-ink Configuration
# Perfect for most e-ink displays (Kindle, Kobo, etc.)
#
# This configuration uses 2-bit grayscale (4 gray levels) with Floyd-Steinberg
# dithering, which provides excellent quality for most e-ink displays while
# keeping file sizes small.

name: "Puppet"
version: "2.0.0"
slug: "puppet"

# Required: Your Home Assistant long-lived access token
# Create one in your HA profile settings
access_token: "YOUR_LONG_LIVED_ACCESS_TOKEN_HERE"

# Optional: Override HA URL if using SSL or different hostname
# Default: http://homeassistant:8123
home_assistant_url: "http://homeassistant:8123"

# Optional: Keep browser running for faster screenshots
# Default: false (closes after 30s)
keep_browser_open: false

# Schedule Configuration
schedules:
  # Example: Kitchen display updated every 10 minutes
  - name: "Kitchen E-ink Display"

    # Cron expression: Every 10 minutes
    # Format: minute hour day month weekday
    # Examples:
    #   "*/5 * * * *"     - Every 5 minutes
    #   "0 */2 * * *"     - Every 2 hours
    #   "0 8 * * *"       - Daily at 8 AM
    #   "0 0 * * 0"       - Weekly on Sunday midnight
    cron: "*/10 * * * *"

    # Home Assistant dashboard path
    # Examples: /lovelace/0, /lovelace/kitchen, /dashboard-admin/home
    dashboard_path: "/lovelace/0"

    # Viewport size (WIDTHxHEIGHT)
    # Common e-ink sizes:
    #   Kindle Paperwhite: 1072x1448, 758x1024 (portrait)
    #   Kindle Paperwhite: 1448x1072, 1024x758 (landscape)
    #   Kobo Clara HD: 1072x1448
    #   7.5" e-ink: 800x480
    viewport: "800x480"

    # Webhook URL - where to upload the screenshot
    # The image will be sent via HTTP PUT request
    webhook_url: "https://your-server.com/api/upload/kitchen"

    # Output format (optional)
    # Options: png (default), jpeg, webp, bmp
    format: png

    # Advanced Dithering Configuration (RECOMMENDED for e-ink)
    dithering:
      # Enable advanced dithering
      enabled: true

      # Dithering method
      # Options:
      #   floyd-steinberg - Best quality (RECOMMENDED)
      #   ordered         - Faster, but can show patterns
      #   none            - Simple posterization
      method: floyd-steinberg

      # Bit depth (colors available)
      # Options:
      #   1 - Pure black & white (2 colors)
      #   2 - 4 gray levels (RECOMMENDED for most e-ink)
      #   4 - 16 gray levels (high quality)
      #   8 - 256 gray levels (full grayscale)
      bit_depth: 2

      # Gamma correction (CRITICAL for e-ink displays!)
      # E-ink displays have linear response, not gamma curve
      # Always keep this true for e-ink
      gamma_correction: true

      # Optional: Black/white level adjustments (0-100)
      # Increase black_level to crush darker grays to black
      # Decrease white_level to crush lighter grays to white
      # Useful for improving contrast
      black_level: 0
      white_level: 100

# Notes:
# - First screenshot after startup takes ~6-8 seconds
# - Subsequent screenshots take ~1-2 seconds
# - Dithering adds ~200ms processing time
# - Memory usage: ~200-300MB
